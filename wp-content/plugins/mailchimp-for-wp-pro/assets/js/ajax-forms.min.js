window.mc4wpAjaxForms=function(){function a(){return void 0===i.fn.ajaxForm?void j.log("MailChimp for WP: jquery-forms.js is not loaded properly. Not activating AJAX."):(i(".mc4wp-ajax form").ajaxForm({data:{action:"mc4wp_submit_form"},dataType:"json",url:mc4wp_vars.ajaxurl,delegation:!0,success:d,error:e,beforeSubmit:b}),void i(".mc4wp-form").find('[type="submit"]').click(function(){i(this).parents(".mc4wp-form").addClass("mc4wp-form-submitted")}))}function b(a,b){var d,e;h=b.parent(".mc4wp-form"),h.removeClass("mc4wp-form-success"),h.removeClass("mc4wp-form-error"),h.find(".mc4wp-alert").hide(),h.find("#mc4wp-mailchimp-error").remove(),e=b.find('input[type="submit"], button[type="submit"]').first(),e.attr("disabled","disabled"),$loadingText=e.data("loading-text"),$loadingText?(e.data("original-text",c(e)),c(e,$loadingText)):(d=h.find(".mc4wp-ajax-loader"),d.insertAfter(e),d.show().css("display","inline-block"),parseInt(d.css("margin-left"))<5&&d.css("margin-left","5px"));var f=i.Event("mc4wp.ajax.before");f.form=h,i(document).trigger(f)}function c(a,b){if(a.is("button")){var c=a.text();void 0!==b&&a.text(b)}else{var c=a.val();void 0!==b&&a.val(b)}return c}function d(a){var b=i.Event("mc4wp.ajax.after");b.form=h,b.response=a,i(document).trigger(b);var d;d=h.find(".mc4wp-ajax-loader"),d.hide(),$submitButton=h.find('input[type="submit"], button[type="submit"]').first();var e=$submitButton.data("original-text");e&&c($submitButton,e),$submitButton.removeAttr("disabled"),a.success?f(a.redirect,a.hide_form,a.data):g(a.error,a.data)}function e(a){j.log(a)}function f(a,b,c){var d=h.find("form");h.addClass("mc4wp-form-success"),h.find("div.mc4wp-success-message").show(),d.trigger("reset"),a&&""!=a&&window.setTimeout(function(){window.location.replace(a)},2500),b&&d.hide();var e=i.Event("mc4wp.success");e.form=h,e.formData=c,i(document).trigger(e)}function g(a,b){var c,d;c=""==a.type?"error":a.type,"no_lists_selected"===c&&(c="error",j.log("You didn't select a MailChimp list to subscribe to in the form settings.")),h.addClass("mc4wp-form-error"),d=h.find(".mc4wp-"+c+"-message").show(),a.show&&"error"==c&&""!=a.mailchimp_error&&i('<div class="mc4wp-alert mc4wp-notice" id="mc4wp-mailchimp-error"><strong>MailChimp returned this error:</strong><br>'+a.mailchimp_error+"<br><br><em>this message is only visible to administrators</em></div>").insertAfter(d);var e=i.Event("mc4wp.error");e.form=h,e.formData=b,e.error=a,i(document).trigger(e)}var h,i=window.jQuery,j=j||{log:function(){}};return{init:function(){a()}}}(),jQuery(document).ready(function(){mc4wpAjaxForms.init()});