window.mc4wpAjaxForms=function(){"use strict";function a(){l=n(".mc4wp-ajax"),m=l.find("form"),n(document.body).on("submit",".mc4wp-ajax form",b),mc4wp_vars.ajaxloader.enabled&&m.find("input").bind("focus.mc4wp",c),j()}function b(a){a.preventDefault();var b=n(this).serialize();return d(b,n(this)),n.ajax({type:"POST",url:mc4wp_vars.ajaxurl,success:f,error:g,data:b,dataType:"json"}),!1}function c(){n(".mc4wp-ajax-loader").css({"vertical-align":"middle",height:"16px",width:"16px",border:0,background:'url("'+mc4wp_vars.ajaxloader.imgurl+'") no-repeat center center'}),m.find("input").unbind("focus.mc4wp")}function d(a,b){var c,d,f;k=b.parent(".mc4wp-form"),k.removeClass("mc4wp-form-success"),k.removeClass("mc4wp-form-error"),k.find(".mc4wp-alert").remove(),d=b.find('[type="submit"]').last(),f=d.get(0),f.disabled=!0;var g=d.data("loading-text");g?(d.data("original-text",e(f)),e(f,g)):(c=k.find(".mc4wp-ajax-loader").get(0),f.parentNode.insertBefore(c,f.nextSibling),c.style.display="inline-block",(""===c.style.marginLeft||parseInt(c.style.marginLeft)<5)&&(c.style.marginLeft="5px")),k.trigger({type:"submit.mc4wp",formData:a})}function e(a,b){var c="BUTTON"===a.tagName;return"string"==typeof b&&(c?a.innerText=b:a.value=b),c?a.innerText:a.value}function f(a){var b,c;k.trigger({type:"ajaxSuccess.mc4wp",response:a}),k.find(".mc4wp-ajax-loader").get(0).style.display="none",k.find(".mc4wp-response").html(a.data.html),b=k.find('[type="submit"]').last(),c=b.get(0);var d=b.data("original-text");d&&e(c,d),c.disabled=!1,a.success?h(a.data.redirect,a.data.hide_form,a.data.data):i(a.data.error,a.data.data)}function g(a){k.trigger({type:"ajaxError.mc4wp",response:a}),o.log(a)}function h(a,b,c){var d=k.find("form");k.addClass("mc4wp-form-success"),d.trigger("reset"),a&&""!=a.url&&window.setTimeout(function(){window.location.replace(a.url)},a.delay),b&&(d.get(0).style.display="none"),k.trigger({type:"subscribe.mc4wp",formData:c})}function i(a,b){k.addClass("mc4wp-form-error"),k.trigger({type:"error.mc4wp",formData:b,error:a.type})}function j(){var a=function(a){"subscribe"===a.type&&(a.type="success");var b=a.namespace+"."+a.type;jQuery(document).trigger({type:b,form:n(this),formData:a.formData,error:a.error,response:a.response})};l.on("subscribe.mc4wp",a),l.on("error.mc4wp",a)}var k,l,m,n=window.jQuery,o=window.console||{log:function(){}};return{init:a}}(),jQuery(document).ready(mc4wpAjaxForms.init);